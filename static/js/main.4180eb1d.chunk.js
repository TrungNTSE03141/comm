(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);n(43),n(45);var a=n(0),s=n.n(a),o=n(40),r=n.n(o),c=(n(51),n(2)),i=n(3),l=n(5),m=n(4),u=n(6);n(53),n(55);function d(e){return s.a.createElement("div",{className:"bootstrap_customize_container"},s.a.createElement("div",{className:"bootstrap_customize_message",style:e.style},e.content))}function h(e){return s.a.createElement("textarea",{placeholder:"Type a message here",value:e.defaultValue,onChange:e.onChange,onKeyUp:e.onKeyUp,className:"form-control",rows:"3",id:e.id,style:e.style})}var p=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).scrollToBottom=function(){n.messagesEnd.scrollIntoView({behavior:"smooth"})},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"message_board_container"},this.props.messages.map(function(e,t){return s.a.createElement("div",{key:t,className:"row"},s.a.createElement("div",{className:"col-sm-1"},e.friend?s.a.createElement("img",{width:50,height:50,style:{marginBottom:10},src:"https://www.w3schools.com/bootstrap4/paris.jpg",className:"rounded-circle",alt:"AV"}):null),s.a.createElement("div",{className:"col-sm-11"},e.friend?s.a.createElement(d,{content:e.content}):s.a.createElement(d,{content:e.content,style:{float:"right"}})))}),s.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}}))}}]),t}(s.a.Component),g=(n(57),n(41)),f=n.n(g),E="https://ec2-18-136-198-209.ap-southeast-1.compute.amazonaws.com:4002",v=function(){function e(){Object(c.a)(this,e),this.socketClient||(this.socketClient=f()(E))}return Object(i.a)(e,[{key:"register",value:function(e,t){this.socketClient.emit(y.EMIT_TYPES.REGISTER,e,t)}},{key:"registerResponse",value:function(e){this.socketClient.on(y.EMIT_TYPES.REGISTER,function(t){e(t)})}},{key:"send",value:function(e){this.socketClient.emit(y.EMIT_TYPES.TEXT_MESSAGE,e)}},{key:"receive",value:function(e){this.socketClient.on(y.EMIT_TYPES.TEXT_MESSAGE,function(t){e(t)})}},{key:"ReceiveAvailableUsers",value:function(e){this.socketClient.on(y.EMIT_TYPES.UPDATE_AVAILABLE_USERS,function(t){e(t)})}}]),e}();v.socketClient=null;var y={EMIT_TYPES:{REGISTER:"Register",TEXT_MESSAGE:"Text Message",UPDATE_AVAILABLE_USERS:"Update Available Users"}},b=new v,S=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).messageClear=function(){n.setState({message:""})},n.typingHandler=function(e){13===e.which&&n.messageSender()},n.messageSender=function(){n.state.message.trim().length>0&&(b.send(n.state.message),n.props.onSentMessage(n.state.message),n.messageClear())},n.handleChange=function(e){n.setState({message:e.target.value})},n.state={message:""},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"message_maker_container row"},s.a.createElement(h,{style:{border:"none",backgroundColor:"#F5FAFC"},defaultValue:this.state.message,onChange:this.handleChange,onKeyUp:this.typingHandler}))}}]),t}(s.a.Component),k=(n(86),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={mock_participants:[]},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.ReceiveAvailableUsers(function(t){console.log(t),e.setState({mock_participants:t})})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"participant_list_container"},this.state.mock_participants.map(function(t,n){return s.a.createElement("div",{className:"wrapper",key:n,onClick:function(){e.props.onVideoCall(t.remoteID)}},s.a.createElement("div",{className:"block"},s.a.createElement("img",{width:45,height:45,src:"https://www.w3schools.com/bootstrap4/paris.jpg",className:"rounded-circle",alt:t.username}),s.a.createElement("span",{className:"label",title:t.username},t.username)))}))}}]),t}(s.a.Component));n(88);var w=function(e){return s.a.createElement("div",null,s.a.createElement("input",{className:"search_input border-bottom",id:e.id,placeholder:e.placeholder}))},C=(n(90),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).onTypingHandler=function(e){n.setState({username:e.target.value})},n.onKeyUp=function(e){13===e.which&&n.state.username.trim().length>0&&b.register(n.state.username,n.props.remoteID)},n.onResponse=function(e){n.props.onLoginResponse(e)},n.state={username:""},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){b.registerResponse(this.onResponse)}},{key:"render",value:function(){return s.a.createElement("div",{style:{height:"100vh",width:"100vw",backgroundColor:"black"}},s.a.createElement("div",{className:"login_form"},s.a.createElement("h3",{className:"title"},"What's your nickname?"),s.a.createElement("input",{onChange:this.onTypingHandler,onKeyUp:this.onKeyUp,className:"usernameInput",type:"text",maxLength:"14"})))}}]),t}(s.a.Component)),I=n(22),j=n.n(I),T="lwjd5qra8257b9",O=function(){function e(){var t=this;Object(c.a)(this,e),this.openStream=function(){return navigator.mediaDevices.getUserMedia({audio:!0,video:!0})},this.playVideoStream=function(e,t){e.srcObject=t,e.play()},this.openConnect=function(e){t.peerInstance.on("open",e)},this.ReceiveCallListener=function(e,n){t.peerInstance.on("call",function(a){t.openStream().then(function(s){a.answer(s),t.playVideoStream(e,s),a.on("stream",function(e){return t.playVideoStream(n,e)})})})},this.Call=function(e,n,a){t.openStream().then(function(s){t.playVideoStream(n,s),t.peerInstance.call(e,s).on("stream",function(e){return t.playVideoStream(a,e)})})},this.peerInstance||(this.peerInstance=new j.a({key:T}))}return Object(i.a)(e,[{key:"PeerInstance",get:function(){return this.peerInstance||(this.peerInstance=new j.a({key:T})),this.peerInstance}}]),e}();O.peerInstance=null;var _=new O,R=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).messageReceived=function(e){n.onShowMessage(e)},n.onSentMessage=function(e){n.onShowMessage(e)},n.onLoginResponse=function(e){1===e.code?(n.setState({isLoggedIn:!0,username:e.username}),_.ReceiveCallListener(document.getElementById("localStream"),document.getElementById("remoteStream"))):alert(e.message)},n.onShowMessage=function(e){var t=n.state.messages;t=e.username?t.splice(t.length,0,{content:e.message,friend:e.username!==n.state.username,username:e.username}):t.splice(t.length,0,{content:e,friend:!1,username:n.state.username}),n.setState({message:t})},n.onVideoCall=function(e){_.Call(e,document.getElementById("localStream"),document.getElementById("remoteStream"))},n.state={messages:[],isLoggedIn:!1,username:"",remoteID:""},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.receive(this.messageReceived),_.openConnect(function(t){console.log(t),e.setState({remoteID:t})})}},{key:"render",value:function(){return this.state.isLoggedIn?s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header",style:{height:100,backgroundImage:"linear-gradient(to bottom right, red, yellow)"}}),s.a.createElement("div",{className:"row border-top"},s.a.createElement("div",{className:"col-sm-3 border-right",style:{backgroundColor:"#F5FAFC",borderRadius:20}},s.a.createElement("video",{id:"localStream",width:"95%",controls:!0,style:{paddingLeft:20,paddingTop:20}}),s.a.createElement("video",{id:"remoteStream",width:"95%",controls:!0,style:{paddingLeft:20,paddingTop:20}})),s.a.createElement("div",{className:"col-sm-6",style:{backgroundColor:"#F5FAFC",borderRadius:20}},s.a.createElement(p,{messages:this.state.messages}),s.a.createElement("hr",null),s.a.createElement(S,{onSentMessage:this.onSentMessage})),s.a.createElement("div",{className:"col-sm-3 border-left",style:{borderRadius:20}},s.a.createElement(w,{placeholder:"Search"}),s.a.createElement(k,{onVideoCall:this.onVideoCall})))):s.a.createElement("div",{className:"App",style:{backgroundColor:"black"}},s.a.createElement(C,{remoteID:this.state.remoteID,onLoginResponse:this.onLoginResponse}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},42:function(e,t,n){e.exports=n(109)},51:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},83:function(e,t){},86:function(e,t,n){},88:function(e,t,n){},90:function(e,t,n){}},[[42,2,1]]]);
//# sourceMappingURL=main.4180eb1d.chunk.js.map