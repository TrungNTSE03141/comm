(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);n(43),n(45);var a=n(0),o=n.n(a),s=n(41),r=n.n(s),c=(n(51),n(2)),i=n(3),l=n(5),m=n(4),u=n(6);n(53),n(55);function d(e){return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"message",style:e.style},e.content))}function h(e){return o.a.createElement("textarea",{placeholder:"Type a message here",value:e.defaultValue,onChange:e.onChange,onKeyUp:e.onKeyUp,className:"form-control",rows:"3",id:e.id,style:e.style})}var p=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).scrollToBottom=function(){n.messagesEnd.scrollIntoView({behavior:"smooth"})},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{height:"calc(100vh - 250px)",width:"102%",overflowY:"auto",overflowX:"hidden",marginTop:10,marginLeft:-15}},this.props.messages.map(function(e,t){return o.a.createElement("div",{key:t,className:"row"},o.a.createElement("div",{className:"col-sm-1"},e.friend?o.a.createElement("img",{width:50,height:50,style:{marginBottom:10},src:"https://www.w3schools.com/bootstrap4/paris.jpg",className:"rounded-circle",alt:"AV"}):null),o.a.createElement("div",{className:"col-sm-11"},e.friend?o.a.createElement(d,{content:e.content}):o.a.createElement(d,{content:e.content,style:{float:"right"}})))}),o.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}}))}}]),t}(o.a.Component),g=(n(57),n(22)),f=n.n(g),E="http://ec2-18-136-198-209.ap-southeast-1.compute.amazonaws.com:4002",v=f()(E),y=function(){function e(){Object(c.a)(this,e),v||(v=f()(E))}return Object(i.a)(e,null,[{key:"register",value:function(e,t){v.emit(b.EMIT_TYPES.REGISTER,e,t)}},{key:"registerResponse",value:function(e){v.on(b.EMIT_TYPES.REGISTER,function(t){e(t)})}},{key:"send",value:function(e){v.emit(b.EMIT_TYPES.TEXT_MESSAGE,e)}},{key:"receive",value:function(e){v.on(b.EMIT_TYPES.TEXT_MESSAGE,function(t){e(t)})}},{key:"memberJoinListener",value:function(e){v.on(b.EMIT_TYPES.NEW_MEMBER_JOIN,function(t){e(t)})}}]),e}(),b={EMIT_TYPES:{REGISTER:"Register",TEXT_MESSAGE:"Text Message",NEW_MEMBER_JOIN:"New Member Join"}},w=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).messageClear=function(){n.setState({message:""})},n.typingHandler=function(e){13===e.which&&n.messageSender()},n.messageSender=function(){n.state.message.trim().length>0&&(y.send(n.state.message),n.props.onSentMessage(n.state.message),n.messageClear())},n.handleChange=function(e){n.setState({message:e.target.value})},n.state={message:""},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"row",style:{paddingLeft:10,paddingRight:10}},o.a.createElement(h,{style:{border:"none",backgroundColor:"#F5FAFC"},defaultValue:this.state.message,onChange:this.handleChange,onKeyUp:this.typingHandler}))}}]),t}(o.a.Component),S=(n(86),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={mock_participants:[]},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.memberJoinListener(function(t){console.log(t),e.setState({mock_participants:[t].concat(e.state.mock_participants)})})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"participant_list_container"},this.state.mock_participants.map(function(t,n){return o.a.createElement("div",{className:"wrapper",key:n,onClick:function(){e.props.onVideoCall(t.remoteID)}},o.a.createElement("div",{className:"block"},o.a.createElement("img",{width:45,height:45,src:"https://www.w3schools.com/bootstrap4/paris.jpg",className:"rounded-circle",alt:t.username}),o.a.createElement("span",{className:"label",title:t.username},t.username)))}))}}]),t}(o.a.Component)),k=(n(88),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).onTypingHandler=function(e){n.setState({username:e.target.value})},n.onKeyUp=function(e){13===e.which&&n.state.username.trim().length>0&&y.register(n.state.username,n.props.remoteID)},n.onResponse=function(e){n.props.onLoginResponse(e)},n.state={username:""},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){y.registerResponse(this.onResponse)}},{key:"render",value:function(){return o.a.createElement("div",{style:{height:"100vh",width:"100vw",backgroundColor:"black"}},o.a.createElement("div",{className:"form"},o.a.createElement("h3",{className:"title"},"What's your nickname?"),o.a.createElement("input",{onChange:this.onTypingHandler,onKeyUp:this.onKeyUp,className:"usernameInput",type:"text",maxLength:"14"})))}}]),t}(o.a.Component)),I=n(23),j=n.n(I),C="lwjd5qra8257b9",O=new(function(){function e(){var t=this;Object(c.a)(this,e),this.peerInstance=null,this.openStream=function(){return navigator.mediaDevices.getUserMedia({audio:!1,video:!0})},this.playVideoStream=function(e,t){e.srcObject=t,e.play()},this.openConnect=function(e){t.peerInstance.on("open",e)},this.ReceiveCallListener=function(e,n){t.peerInstance.on("call",function(a){t.openStream().then(function(o){a.answer(o),t.playVideoStream(e,o),a.on("stream",function(e){return t.playVideoStream(n,e)})})})},this.Call=function(e,n,a){t.openStream().then(function(o){t.playVideoStream(n,o),t.peerInstance.call(e,o).on("stream",function(e){return t.playVideoStream(a,e)})})},this.peerInstance||(this.peerInstance=new j.a({key:C}))}return Object(i.a)(e,[{key:"PeerInstance",get:function(){return this.peerInstance||(this.peerInstance=new j.a({key:C})),this.peerInstance}}]),e}()),T=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).messageReceived=function(e){n.onShowMessage(e)},n.onSentMessage=function(e){n.onShowMessage(e)},n.onLoginResponse=function(e){1===e.code?(n.setState({isLoggedIn:!0,username:e.username}),O.ReceiveCallListener(document.getElementById("localStream"),document.getElementById("remoteStream"))):alert(e.message)},n.onShowMessage=function(e){var t=n.state.messages;t=e.username?t.splice(t.length,0,{content:e.message,friend:e.username!==n.state.username,username:e.username}):t.splice(t.length,0,{content:e,friend:!1,username:n.state.username}),n.setState({message:t})},n.onVideoCall=function(e){O.Call(e,document.getElementById("localStream"),document.getElementById("remoteStream"))},n.state={messages:[],isLoggedIn:!1,username:"",remoteID:""},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.receive(this.messageReceived),O.openConnect(function(t){console.log(t),e.setState({remoteID:t})})}},{key:"render",value:function(){return this.state.isLoggedIn?o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header",style:{height:100,backgroundImage:"linear-gradient(to bottom right, red, yellow)"}}),o.a.createElement("div",{className:"row border-top"},o.a.createElement("div",{className:"col-sm-3 border-right",style:{backgroundColor:"#F5FAFC"}},o.a.createElement("video",{id:"localStream",width:"95%",controls:!0,style:{paddingLeft:20,paddingTop:20}}),o.a.createElement("video",{id:"remoteStream",width:"95%",controls:!0,style:{paddingLeft:20,paddingTop:20}})),o.a.createElement("div",{className:"col-sm-6",style:{backgroundColor:"#F5FAFC"}},o.a.createElement(p,{messages:this.state.messages}),o.a.createElement("hr",null),o.a.createElement(w,{onSentMessage:this.onSentMessage})),o.a.createElement("div",{className:"col-sm-3 border-left"},o.a.createElement(S,{onVideoCall:this.onVideoCall})))):o.a.createElement("div",{className:"App",style:{backgroundColor:"black"}},o.a.createElement(k,{remoteID:this.state.remoteID,onLoginResponse:this.onLoginResponse}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},42:function(e,t,n){e.exports=n(107)},51:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},83:function(e,t){},86:function(e,t,n){},88:function(e,t,n){}},[[42,2,1]]]);
//# sourceMappingURL=main.bede2207.chunk.js.map