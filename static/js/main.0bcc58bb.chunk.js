(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,a,t){"use strict";t.r(a);t(43),t(45);var n=t(0),s=t.n(n),o=t(41),r=t.n(o),c=(t(51),t(2)),i=t(3),l=t(5),m=t(4),u=t(6);t(53),t(55);function d(e){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"message",style:e.style},e.content))}function g(e){return s.a.createElement("textarea",{placeholder:"Type a message here",value:e.defaultValue,onChange:e.onChange,onKeyUp:e.onKeyUp,className:"form-control",rows:"3",id:e.id,style:e.style})}var h=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=Object(l.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(s)))).scrollToBottom=function(){t.messagesEnd.scrollIntoView({behavior:"smooth"})},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{style:{height:"calc(100vh - 250px)",width:"102%",overflowY:"auto",overflowX:"hidden",marginTop:10,marginLeft:-15}},this.props.messages.map(function(e,a){return s.a.createElement("div",{key:a,className:"row"},s.a.createElement("div",{className:"col-sm-1"},e.friend?s.a.createElement("img",{width:50,height:50,style:{marginBottom:10},src:"https://www.w3schools.com/bootstrap4/paris.jpg",className:"rounded-circle",alt:"AV"}):null),s.a.createElement("div",{className:"col-sm-11"},e.friend?s.a.createElement(d,{content:e.content}):s.a.createElement(d,{content:e.content,style:{float:"right"}})))}),s.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(a){e.messagesEnd=a}}))}}]),a}(s.a.Component),p=(t(57),t(22)),j=t.n(p),f="http://ec2-18-136-198-209.ap-southeast-1.compute.amazonaws.com:4002",y=j()(f),v=function(){function e(){Object(c.a)(this,e),y||(y=j()(f))}return Object(i.a)(e,null,[{key:"register",value:function(e){y.emit(E.EMIT_TYPES.REGISTER,e)}},{key:"registerResponse",value:function(e){y.on(E.EMIT_TYPES.REGISTER,function(a){e(a)})}},{key:"send",value:function(e){y.emit(E.EMIT_TYPES.TEXT_MESSAGE,e)}},{key:"receive",value:function(e){y.on(E.EMIT_TYPES.TEXT_MESSAGE,function(a){e(a)})}}]),e}(),E={EMIT_TYPES:{REGISTER:"Register",TEXT_MESSAGE:"Text Message"}},b=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(l.a)(this,Object(m.a)(a).call(this,e))).messageClear=function(){t.setState({message:""})},t.typingHandler=function(e){13===e.which&&t.messageSender()},t.messageSender=function(){t.state.message.trim().length>0&&(v.send(t.state.message),t.props.onSentMessage(t.state.message),t.messageClear())},t.handleChange=function(e){t.setState({message:e.target.value})},t.state={message:""},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"row",style:{paddingLeft:10,paddingRight:10}},s.a.createElement(g,{style:{border:"none",backgroundColor:"#F5FAFC"},defaultValue:this.state.message,onChange:this.handleChange,onKeyUp:this.typingHandler}))}}]),a}(s.a.Component),w=(t(86),[{username:"Giang Nguyen",remoteID:"ajjhasdjjasd0000"},{username:"Trung Nguyen",remoteID:"ajjhasdaadsd0000"},{username:"Fozg Dao",remoteID:"ajjhasaaddsd0000"},{username:"Giang Nguyen",remoteID:"ajjhasdjjasd0000"},{username:"Trung Nguyen",remoteID:"ajjhasdaadsd0000"},{username:"Fozg Dao",remoteID:"ajjhasaaddsd0000"},{username:"Giang Nguyen",remoteID:"ajjhasdjjasd0000"},{username:"Trung Nguyen",remoteID:"ajjhasdaadsd0000"},{username:"Fozg Dao",remoteID:"ajjhasaaddsd0000"},{username:"Giang Nguyen",remoteID:"ajjhasdjjasd0000"},{username:"Trung Nguyen",remoteID:"ajjhasdaadsd0000"},{username:"Fozg Dao",remoteID:"ajjhasaaddsd0000"},{username:"Giang Nguyen",remoteID:"ajjhasdjjasd0000"},{username:"Trung Nguyen",remoteID:"ajjhasdaadsd0000"},{username:"Fozg Dao",remoteID:"ajjhasaaddsd0000"},{username:"Giang Nguyen",remoteID:"ajjhasdjjasd0000"},{username:"Trung Nguyen",remoteID:"ajjhasdaadsd0000"},{username:"Fozg Dao",remoteID:"ajjhasaaddsd0000"},{username:"Giang Nguyen",remoteID:"ajjhasdjjasd0000"},{username:"Trung Nguyen",remoteID:"ajjhasdaadsd0000"},{username:"Fozg Dao",remoteID:"ajjhasaaddsd0000"}]),I=function(e){function a(){return Object(c.a)(this,a),Object(l.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"participant_list_container"},w.map(function(e,a){return s.a.createElement("div",{className:"wrapper",key:a},s.a.createElement("div",{className:"block"},s.a.createElement("img",{width:45,height:45,src:"https://www.w3schools.com/bootstrap4/paris.jpg",className:"rounded-circle",alt:e.username}),s.a.createElement("span",{className:"label",title:"Giang Nguyen"},e.username)))}))}}]),a}(s.a.Component),N=(t(88),function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(l.a)(this,Object(m.a)(a).call(this,e))).onTypingHandler=function(e){t.setState({username:e.target.value})},t.onKeyUp=function(e){13===e.which&&t.state.username.trim().length>0&&v.register(t.state.username)},t.onResponse=function(e){t.props.onLoginResponse(e)},t.state={username:""},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){v.registerResponse(this.onResponse)}},{key:"render",value:function(){return s.a.createElement("div",{style:{height:"100vh",width:"100vw",backgroundColor:"black"}},s.a.createElement("div",{className:"form"},s.a.createElement("h3",{className:"title"},"What's your nickname?"),s.a.createElement("input",{onChange:this.onTypingHandler,onKeyUp:this.onKeyUp,className:"usernameInput",type:"text",maxLength:"14"})))}}]),a}(s.a.Component)),S=t(23),T=t.n(S),D="lwjd5qra8257b9",k=new(function(){function e(){var a=this;Object(c.a)(this,e),this.peerInstance=null,this.openStream=function(){return navigator.mediaDevices.getUserMedia({audio:!1,video:!0})},this.playVideoStream=function(e,a){e.srcObject=a,e.play()},this.openConnect=function(e){a.peerInstance.on("open",e)},this.ReceiveCall=function(e,t){a.peerInstance.on("call",function(n){a.openStream().then(function(s){n.answer(s),a.playVideoStream(e,s),n.on("stream",function(e){return a.playVideoStream(t,e)})})})},this.Call=function(e,t,n){a.openStream().then(function(s){a.playVideoStream(t,s),a.peerInstance.call(e,s).on("stream",function(e){return a.playVideoStream(n,e)})})},this.peerInstance||(this.peerInstance=new T.a({key:D}))}return Object(i.a)(e,[{key:"PeerInstance",get:function(){return this.peerInstance||(this.peerInstance=new T.a({key:D})),this.peerInstance}}]),e}()),O=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(l.a)(this,Object(m.a)(a).call(this,e))).messageReceived=function(e){t.onShowMessage(e)},t.onSentMessage=function(e){t.onShowMessage(e)},t.onLoginResponse=function(e){1===e.code?t.setState({isLoggedIn:!0,username:e.username}):alert(e.message)},t.onShowMessage=function(e){var a=t.state.messages;a=e.username?a.splice(a.length,0,{content:e.message,friend:e.username!==t.state.username,username:e.username}):a.splice(a.length,0,{content:e,friend:!1,username:t.state.username}),t.setState({message:a})},t.state={messages:[],isLoggedIn:!1,username:""},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){v.receive(this.messageReceived),k.openConnect(function(e){console.log(e)})}},{key:"render",value:function(){return this.state.isLoggedIn?s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header",style:{height:100,backgroundImage:"linear-gradient(to bottom right, red, yellow)"}}),s.a.createElement("div",{className:"row border-top"},s.a.createElement("div",{className:"col-sm-3 border-right",style:{backgroundColor:"#F5FAFC"}},s.a.createElement("video",{id:"localStream",width:"95%",controls:!0,style:{paddingLeft:20,paddingTop:20}}),s.a.createElement("video",{id:"remoteStream",width:"95%",controls:!0,style:{paddingLeft:20,paddingTop:20}})),s.a.createElement("div",{className:"col-sm-6",style:{backgroundColor:"#F5FAFC"}},s.a.createElement(h,{messages:this.state.messages}),s.a.createElement("hr",null),s.a.createElement(b,{onSentMessage:this.onSentMessage})),s.a.createElement("div",{className:"col-sm-3 border-left"},s.a.createElement(I,null)))):s.a.createElement("div",{className:"App",style:{backgroundColor:"black"}},s.a.createElement(N,{onLoginResponse:this.onLoginResponse}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},42:function(e,a,t){e.exports=t(107)},51:function(e,a,t){},53:function(e,a,t){},55:function(e,a,t){},57:function(e,a,t){},83:function(e,a){},86:function(e,a,t){},88:function(e,a,t){}},[[42,2,1]]]);
//# sourceMappingURL=main.0bcc58bb.chunk.js.map